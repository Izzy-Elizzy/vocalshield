var SiriWave=function(){"use strict";function v(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}var y=function(){function i(t){v(this,i),this.controller=t.controller,this.definition=t.definition}return t(i,[{key:"_globAttenuationEquation",value:function(t){return Math.pow(4/(4+Math.pow(t,4)),4)}},{key:"_xpos",value:function(t){return this.controller.$.width/2+t*(this.controller.$.width/4)}},{key:"_ypos",value:function(t){var i=this.controller.$.heightMax*this.controller.amplitude/this.definition.attenuation;return this.controller.$.height/2+this._globAttenuationEquation(t)*i*Math.sin(this.controller.frequency*t-this.controller.phase)}},{key:"draw",value:function(){var t=this.controller.ctx;t.moveTo(0,0),t.beginPath(),t.strokeStyle="rgba("+this.controller.color+","+this.definition.opacity+")",t.lineWidth=this.definition.lineWidth;for(var i=-2;i<=2;i+=.01){var e=this._ypos(i);1.9<=Math.abs(i)&&(e=this.controller.$.height/2),t.lineTo(this._xpos(i),e)}t.stroke()}}],[{key:"getDefinition",value:function(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}]),i}(),w=function(){function i(t){v(this,i),this.controller=t.controller,this.definition=t.definition,this.tick=0,this._respawn()}return t(i,[{key:"_respawn",value:function(){this.amplitude=.3+.7*Math.random(),this.seed=Math.random(),this.openClass=2+3*Math.random()|0}},{key:"_ypos",value:function(t){var i=-1*Math.abs(Math.sin(this.tick))*this.controller.amplitude*this.amplitude*this.controller.$.heightMax*Math.pow(1/(1+Math.pow(this.openClass*t,2)),2);return Math.abs(i)<.001&&this._respawn(),i}},{key:"_draw",value:function(t){var i=this.controller.ctx;this.tick+=this.controller.speed*(1-.5*Math.sin(this.seed*Math.PI)),i.beginPath();for(var e,n,o=this.controller.$.width/2+(-this.controller.$.width/4+this.seed*(this.controller.$.width/2)),a=this.controller.$.height/2,r=null,h=-3;h<=3;h+=.01)e=o+h*(this.controller.$.width/4),n=a+(t||1)*this._ypos(h),null==r&&(r=e),i.lineTo(e,n);var s=Math.abs(this._ypos(0)),l=i.createRadialGradient(o,a,1.15*s,o,a,.3*s);l.addColorStop(0,"rgba("+this.definition.color+", 0.4)"),l.addColorStop(1,"rgba("+this.definition.color+", 0.2)"),i.fillStyle=l,i.lineTo(r,a),i.closePath(),i.fill()}},{key:"draw",value:function(){this._draw(-1),this._draw(1)}}],[{key:"getDefinition",value:function(){return[{color:"32,133,252"},{color:"94,252,169"},{color:"253,71,103"}]}}]),i}();return function(){function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(v(this,f),this.phase=0,this.run=!1,this.$={},null==t.container&&(console.warn("No container defined, using body"),t.container=document.body),this.style=t.style||"ios",this.container=t.container,this.width=t.width||window.getComputedStyle(this.container).width.replace("px",""),this.height=t.height||window.getComputedStyle(this.container).height.replace("px",""),this.ratio=t.ratio||window.devicePixelRatio||1,this.$.width=this.ratio*this.width,this.$.height=this.ratio*this.height,this.$.heightMax=this.$.height/2-4,this.amplitude=null==t.amplitude?1:t.amplitude,this.speed=null==t.speed?.2:t.speed,this.frequency=null==t.frequency?6:t.frequency,this.color=this._hex2rgb(t.color||"#fff"),this.speedInterpolationSpeed=t.speedInterpolationSpeed||.005,this.amplitudeInterpolationSpeed=t.amplitudeInterpolationSpeed||.05,this.$.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.$.width,this.canvas.height=this.$.height,t.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.$.width/this.ratio+"px",this.canvas.style.height=this.$.height/this.ratio+"px"),this.curves=[],"ios9"===this.style){var i=!0,e=!1,n=void 0;try{for(var o,a=w.getDefinition()[Symbol.iterator]();!(i=(o=a.next()).done);i=!0)for(var r=o.value,h=0;h<3*Math.random()|0;h++)this.curves.push(new w({controller:this,definition:r}))}catch(t){e=!0,n=t}finally{try{i||null==a.return||a.return()}finally{if(e)throw n}}}else{var s=!0,l=!1,c=void 0;try{for(var u,d=y.getDefinition()[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;this.curves.push(new y({controller:this,definition:p}))}}catch(t){l=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}}this.container.appendChild(this.canvas),t.autostart&&this.start()}return t(f,[{key:"_hex2rgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,i,e,n){return i+i+e+e+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?parseInt(i[1],16).toString()+","+parseInt(i[2],16).toString()+","+parseInt(i[3],16).toString():null}},{key:"_interpolate",value:function(t){var i=this[t+"InterpolationSpeed"];Math.abs(this.$.interpolation[t]-this[t])<=i?this[t]=this.$.interpolation[t]:this.$.interpolation[t]>this[t]?this[t]+=i:this[t]-=i}},{key:"_clear",value:function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.$.width,this.$.height),this.ctx.globalCompositeOperation="source-over"}},{key:"_draw",value:function(){for(var t=0,i=this.curves.length;t<i;t++)this.curves[t].draw()}},{key:"_startDrawCycle",value:function(){!1!==this.run&&(this._clear(),this._interpolate("amplitude"),this._interpolate("speed"),this._draw(),this.phase=(this.phase+Math.PI*this.speed)%(2*Math.PI),window.requestAnimationFrame?window.requestAnimationFrame(this._startDrawCycle.bind(this)):setTimeout(this._startDrawCycle.bind(this),20))}},{key:"start",value:function(){this.phase=0,this.run=!0,this._startDrawCycle()}},{key:"stop",value:function(){this.phase=0,this.run=!1}},{key:"setSpeed",value:function(t){this.$.interpolation.speed=t}},{key:"setAmplitude",value:function(t){this.$.interpolation.amplitude=Math.max(Math.min(t,1),0)}}]),f}()}();
